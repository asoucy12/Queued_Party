{"ast":null,"code":"import _classCallCheck from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Andy/Desktop/Queued_demo/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Andy/Desktop/Queued_demo/src/components/Home/App.js\";\nimport React, { Component } from \"react\";\nimport * as $ from \"jquery\";\nimport { authEndpoint, clientId, redirectUri, scopes } from \"./config\";\nimport hash from \"./hash\";\nimport Player from \"./Player\";\nimport \"./App.css\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.state = {\n      currentSong: null,\n      nextSong: null,\n      token: null,\n      item: {\n        album: {\n          images: [{\n            url: \"\"\n          }]\n        },\n        name: \"\",\n        artists: [{\n          name: \"\"\n        }],\n        duration_ms: 0\n      },\n      is_playing: \"Paused\",\n      progress_ms: 0\n    };\n    _this.getCurrentlyPlaying = _this.getCurrentlyPlaying.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Set token\n      var _token = hash.access_token;\n      this.interval = window.setInterval(function () {\n        if (_token) {\n          // Set token\n          this.setState({\n            token: _token\n          });\n          var device = this.hasConnectedDevice(_token);\n          console.log(device);\n          this.getCurrentlyPlaying(_token);\n        }\n      }.bind(this), 5000);\n    }\n  }, {\n    key: \"sendNextSong\",\n    value: function sendNextSong(token) {}\n  }, {\n    key: \"hasConnectedDevice\",\n    value: function hasConnectedDevice(token) {\n      $.ajax({\n        url: \"https://api.spotify.com/v1/me/player/device\",\n        type: \"GET\",\n        beforeSend: function beforeSend(xhr) {\n          xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n        },\n        success: function success(data) {\n          if (data) {\n            console.log(\"Found connected device: \" + data);\n            return true;\n          }\n\n          console.log(\"No connected device found.\");\n          return false;\n        }\n      });\n    }\n  }, {\n    key: \"getCurrentlyPlaying\",\n    value: function getCurrentlyPlaying(token) {\n      var _this2 = this;\n\n      // Make a call using the token\n      $.ajax({\n        url: \"https://api.spotify.com/v1/me/player\",\n        type: \"GET\",\n        beforeSend: function beforeSend(xhr) {\n          xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n        },\n        success: function success(data) {\n          if (data != undefined) {\n            _this2.setState({\n              item: data.item,\n              is_playing: data.is_playing,\n              progress_ms: data.progress_ms\n            });\n          } else {\n            _this2.state = {\n              token: null,\n              item: {\n                album: {\n                  images: [{\n                    url: \"\"\n                  }]\n                },\n                name: \"\",\n                artists: [{\n                  name: \"\"\n                }],\n                duration_ms: 0\n              },\n              is_playing: \"Paused\",\n              progress_ms: 0\n            };\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, !this.state.token && React.createElement(\"a\", {\n        className: \"btn btn--loginApp-link\",\n        href: \"\".concat(authEndpoint, \"?client_id=\").concat(clientId, \"&redirect_uri=\").concat(redirectUri, \"&scope=\").concat(scopes.join(\"%20\"), \"&response_type=token&show_dialog=true\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Login to Spotify\"), this.state.token && React.createElement(Player, {\n        item: this.state.item,\n        is_playing: this.state.is_playing,\n        progress_ms: this.progress_ms,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/Andy/Desktop/Queued_demo/src/components/Home/App.js"],"names":["React","Component","$","authEndpoint","clientId","redirectUri","scopes","hash","Player","App","state","currentSong","nextSong","token","item","album","images","url","name","artists","duration_ms","is_playing","progress_ms","getCurrentlyPlaying","bind","_token","access_token","interval","window","setInterval","setState","device","hasConnectedDevice","console","log","ajax","type","beforeSend","xhr","setRequestHeader","success","data","undefined","join"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,CAAZ,MAAmB,QAAnB;AACA,SAASC,YAAT,EAAuBC,QAAvB,EAAiCC,WAAjC,EAA8CC,MAA9C,QAA4D,UAA5D;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAO,WAAP;;IAEMC,G;;;;;AACJ,iBAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE,IADF;AAEXC,MAAAA,QAAQ,EAAE,IAFC;AAGXC,MAAAA,KAAK,EAAE,IAHI;AAIXC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE;AACLC,UAAAA,MAAM,EAAE,CAAC;AAAEC,YAAAA,GAAG,EAAE;AAAP,WAAD;AADH,SADH;AAIJC,QAAAA,IAAI,EAAE,EAJF;AAKJC,QAAAA,OAAO,EAAE,CAAC;AAAED,UAAAA,IAAI,EAAE;AAAR,SAAD,CALL;AAMJE,QAAAA,WAAW,EAAE;AANT,OAJK;AAYXC,MAAAA,UAAU,EAAE,QAZD;AAaXC,MAAAA,WAAW,EAAE;AAbF,KAAb;AAeA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,uDAA3B;AAjBY;AAkBb;;;;wCAEmB;AAClB;AACA,UAAIC,MAAM,GAAGlB,IAAI,CAACmB,YAAlB;AAEA,WAAKC,QAAL,GAAgBC,MAAM,CAACC,WAAP,CACb,YAAY;AACX,YAAIJ,MAAJ,EAAY;AACV;AACA,eAAKK,QAAL,CAAc;AACZjB,YAAAA,KAAK,EAAEY;AADK,WAAd;AAGA,cAAIM,MAAM,GAAG,KAAKC,kBAAL,CAAwBP,MAAxB,CAAb;AACAQ,UAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,eAAKR,mBAAL,CAAyBE,MAAzB;AACD;AACF,OAVD,CAUGD,IAVH,CAUQ,IAVR,CADc,EAYd,IAZc,CAAhB;AAcD;;;iCAEYX,K,EAAM,CAElB;;;uCAEkBA,K,EAAM;AACvBX,MAAAA,CAAC,CAACiC,IAAF,CAAO;AACLlB,QAAAA,GAAG,EAAE,6CADA;AAELmB,QAAAA,IAAI,EAAE,KAFD;AAGLC,QAAAA,UAAU,EAAE,oBAAAC,GAAG,EAAI;AACjBA,UAAAA,GAAG,CAACC,gBAAJ,CAAqB,eAArB,EAAsC,YAAY1B,KAAlD;AACD,SALI;AAML2B,QAAAA,OAAO,EAAE,iBAAAC,IAAI,EAAI;AACf,cAAIA,IAAJ,EAAS;AACPR,YAAAA,OAAO,CAACC,GAAR,CAAY,6BAA6BO,IAAzC;AACA,mBAAO,IAAP;AACD;;AACDR,UAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA,iBAAO,KAAP;AACD;AAbI,OAAP;AAeD;;;wCAEmBrB,K,EAAO;AAAA;;AACzB;AACAX,MAAAA,CAAC,CAACiC,IAAF,CAAO;AACLlB,QAAAA,GAAG,EAAE,sCADA;AAELmB,QAAAA,IAAI,EAAE,KAFD;AAGLC,QAAAA,UAAU,EAAE,oBAAAC,GAAG,EAAI;AACjBA,UAAAA,GAAG,CAACC,gBAAJ,CAAqB,eAArB,EAAsC,YAAY1B,KAAlD;AACD,SALI;AAML2B,QAAAA,OAAO,EAAE,iBAAAC,IAAI,EAAI;AACf,cAAIA,IAAI,IAAIC,SAAZ,EAAsB;AACpB,YAAA,MAAI,CAACZ,QAAL,CAAc;AACZhB,cAAAA,IAAI,EAAE2B,IAAI,CAAC3B,IADC;AAEZO,cAAAA,UAAU,EAAEoB,IAAI,CAACpB,UAFL;AAGZC,cAAAA,WAAW,EAAEmB,IAAI,CAACnB;AAHN,aAAd;AAKD,WAND,MAOK;AACH,YAAA,MAAI,CAACZ,KAAL,GAAa;AACXG,cAAAA,KAAK,EAAE,IADI;AAEXC,cAAAA,IAAI,EAAE;AACJC,gBAAAA,KAAK,EAAE;AACLC,kBAAAA,MAAM,EAAE,CAAC;AAAEC,oBAAAA,GAAG,EAAE;AAAP,mBAAD;AADH,iBADH;AAIJC,gBAAAA,IAAI,EAAE,EAJF;AAKJC,gBAAAA,OAAO,EAAE,CAAC;AAAED,kBAAAA,IAAI,EAAE;AAAR,iBAAD,CALL;AAMJE,gBAAAA,WAAW,EAAE;AANT,eAFK;AAUXC,cAAAA,UAAU,EAAE,QAVD;AAWXC,cAAAA,WAAW,EAAE;AAXF,aAAb;AAaD;AACF;AA7BI,OAAP;AA+BD;;;6BAEQ;AACP,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,SAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,KAAKZ,KAAL,CAAWG,KAAZ,IACC;AACE,QAAA,SAAS,EAAC,wBADZ;AAEE,QAAA,IAAI,YAAKV,YAAL,wBAA+BC,QAA/B,2BAAwDC,WAAxD,oBAA6EC,MAAM,CAACqC,IAAP,CAC/E,KAD+E,CAA7E,0CAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ,EAWG,KAAKjC,KAAL,CAAWG,KAAX,IACC,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAKH,KAAL,CAAWI,IADnB;AAEE,QAAA,UAAU,EAAE,KAAKJ,KAAL,CAAWW,UAFzB;AAGE,QAAA,WAAW,EAAE,KAAKC,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZJ,CADF,CADF;AAuBD;;;;EA1HerB,S;;AA6HlB,eAAeQ,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as $ from \"jquery\";\nimport { authEndpoint, clientId, redirectUri, scopes } from \"./config\";\nimport hash from \"./hash\";\nimport Player from \"./Player\";\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      currentSong: null,\n      nextSong: null,\n      token: null,\n      item: {\n        album: {\n          images: [{ url: \"\" }]\n        },\n        name: \"\",\n        artists: [{ name: \"\" }],\n        duration_ms: 0\n      },\n      is_playing: \"Paused\",\n      progress_ms: 0\n    };\n    this.getCurrentlyPlaying = this.getCurrentlyPlaying.bind(this);\n  }\n\n  componentDidMount() {\n    // Set token\n    let _token = hash.access_token;\n\n    this.interval = window.setInterval(\n      (function () {\n        if (_token) {\n          // Set token\n          this.setState({\n            token: _token\n          });\n          var device = this.hasConnectedDevice(_token);\n          console.log(device);\n          this.getCurrentlyPlaying(_token);\n        }\n      }).bind(this),\n      5000\n    )\n  }\n\n  sendNextSong(token){\n\n  }\n\n  hasConnectedDevice(token){\n    $.ajax({\n      url: \"https://api.spotify.com/v1/me/player/device\",\n      type: \"GET\",\n      beforeSend: xhr => {\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      },\n      success: data => {\n        if (data){\n          console.log(\"Found connected device: \" + data);\n          return true;\n        }\n        console.log(\"No connected device found.\");\n        return false;\n      }\n    })\n  }\n\n  getCurrentlyPlaying(token) {\n    // Make a call using the token\n    $.ajax({\n      url: \"https://api.spotify.com/v1/me/player\",\n      type: \"GET\",\n      beforeSend: xhr => {\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      },\n      success: data => {\n        if (data != undefined){\n          this.setState({\n            item: data.item,\n            is_playing: data.is_playing,\n            progress_ms: data.progress_ms\n          });\n        }\n        else {\n          this.state = {\n            token: null,\n            item: {\n              album: {\n                images: [{ url: \"\" }]\n              },\n              name: \"\",\n              artists: [{ name: \"\" }],\n              duration_ms: 0\n            },\n            is_playing: \"Paused\",\n            progress_ms: 0\n          };\n        }\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          {!this.state.token && (\n            <a\n              className=\"btn btn--loginApp-link\"\n              href={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\n                \"%20\"\n              )}&response_type=token&show_dialog=true`}\n            >\n              Login to Spotify\n            </a>\n          )}\n          {this.state.token && (\n            <Player\n              item={this.state.item}\n              is_playing={this.state.is_playing}\n              progress_ms={this.progress_ms}\n            />\n          )}\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}